# API Endpoint Decision Tree

**Purpose:** Visual guide to help client choose the right endpoint  
**Date:** October 20, 2025

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  CONCIERGE API ENDPOINT SELECTION               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

START HERE: What do you need to do?
â”‚
â”œâ”€ Need to CHECK if server is healthy?
â”‚  â””â”€> GET /api/health âœ…
â”‚
â”œâ”€ Need to GET restaurants?
â”‚  â”œâ”€ With pagination and filters?
â”‚  â”‚  â””â”€> GET /api/restaurants?page=1&limit=50&simple=true âœ…
â”‚  â””â”€ All at once (legacy)?
â”‚     â””â”€> GET /api/restaurants âœ…
â”‚
â””â”€ Need to UPLOAD/SYNC restaurants?
   â”‚
   â”œâ”€ Do you have COMPLETE metadata? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  (location, photos, notes, Michelin, Google Places)     â”‚
   â”‚                                                          â”‚
   â”‚  YES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
   â”‚  â”‚                                                 â”‚     â”‚
   â”‚  â””â”€> Use /api/curation/json âœ… RECOMMENDED        â”‚     â”‚
   â”‚      â”‚                                             â”‚     â”‚
   â”‚      â”œâ”€ Stores complete JSON document              â”‚     â”‚
   â”‚      â”œâ”€ Preserves ALL metadata                     â”‚     â”‚
   â”‚      â”œâ”€ Intelligent duplicate prevention           â”‚     â”‚
   â”‚      â”‚  (name + city + curator)                    â”‚     â”‚
   â”‚      â”œâ”€ Future-proof (no schema changes)           â”‚     â”‚
   â”‚      â””â”€ City extraction: Michelin â†’ Google â†’ Parse â”‚     â”‚
   â”‚                                                     â”‚     â”‚
   â”‚  NO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚     â”‚
   â”‚                                                    â”‚â”‚     â”‚
   â”œâ”€ Do you need to DELETE restaurants remotely? â”€â”€â”€â”€â”€â”¼â”¼â”€â”€â”€â”€â”€â”˜
   â”‚                                                    â”‚â”‚
   â”‚  YES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚â”‚
   â”‚  â”‚                                       â”‚         â”‚â”‚
   â”‚  â””â”€> Use /api/restaurants/sync âš ï¸       â”‚         â”‚â”‚
   â”‚      â”‚                                   â”‚         â”‚â”‚
   â”‚      â”œâ”€ Supports create/update/delete    â”‚         â”‚â”‚
   â”‚      â”œâ”€ Atomic transaction (all or none) â”‚         â”‚â”‚
   â”‚      â”œâ”€ Simple CRUD operations           â”‚         â”‚â”‚
   â”‚      â””â”€ NO metadata storage              â”‚         â”‚â”‚
   â”‚                                           â”‚         â”‚â”‚
   â”‚  NO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
   â”‚                                           â”‚          â”‚
   â””â”€ Need basic sync with server ID mapping? â”‚          â”‚
      â”‚                                        â”‚          â”‚
      â””â”€> Use /api/restaurants/batch âš ï¸ LEGACYâ”‚          â”‚
          â”‚                                    â”‚          â”‚
          â”œâ”€ Returns server IDs               â”‚          â”‚
          â”œâ”€ Partial success support (207)    â”‚          â”‚
          â”œâ”€ Batch size limit: 50             â”‚          â”‚
          â”œâ”€ Basic data only                  â”‚          â”‚
          â””â”€ âŒ Loses location/photos/notes   â”‚          â”‚
                                               â”‚          â”‚
                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DATA PRESERVATION MATRIX                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

What gets stored?
                                      /batch    /sync   /json
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Basic Info (name, description)   â”‚    âœ…   â”‚   âœ…   â”‚   âœ…   â”‚
â”‚ Transcription (audio text)       â”‚    âœ…   â”‚   âœ…   â”‚   âœ…   â”‚
â”‚ Curator information              â”‚    âœ…   â”‚   âœ…   â”‚   âœ…   â”‚
â”‚ Concepts (categories)            â”‚    âœ…   â”‚   âœ…   â”‚   âœ…   â”‚
â”‚ Server ID mapping                â”‚    âœ…   â”‚   âœ…   â”‚   âŒ   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Location (lat/lng/address)       â”‚    âŒ   â”‚   âŒ   â”‚   âœ…   â”‚
â”‚ Private notes                    â”‚    âŒ   â”‚   âŒ   â”‚   âœ…   â”‚
â”‚ Public notes                     â”‚    âŒ   â”‚   âŒ   â”‚   âœ…   â”‚
â”‚ Photos (base64)                  â”‚    âŒ   â”‚   âŒ   â”‚   âœ…   â”‚
â”‚ Michelin data                    â”‚    âŒ   â”‚   âŒ   â”‚   âœ…   â”‚
â”‚ Google Places data               â”‚    âŒ   â”‚   âŒ   â”‚   âœ…   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DUPLICATE PREVENTION                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

/api/restaurants/batch & /sync:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Composite Key: (name)                                â”‚
â”‚                                                      â”‚
â”‚ Example:                                             â”‚
â”‚   "Osteria Francescana" = UNIQUE                    â”‚
â”‚                                                      â”‚
â”‚ Problem: Cannot distinguish same restaurant in      â”‚
â”‚          different cities or by different curators  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

/api/curation/json:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Composite Key: (name, city, curator_id)             â”‚
â”‚                                                      â”‚
â”‚ Examples:                                            â”‚
â”‚   ("Osteria Francescana", "Modena", 1) = Entry A   â”‚
â”‚   ("Osteria Francescana", "Modena", 1) = UPDATE A   â”‚
â”‚   ("Osteria Francescana", "Modena", 2) = Entry B   â”‚
â”‚   ("Osteria Francescana", "Rome", 1)   = Entry C   â”‚
â”‚                                                      â”‚
â”‚ Benefit: Allows same restaurant in different cities â”‚
â”‚          or reviewed by different curators          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CITY EXTRACTION LOGIC                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

For /api/curation/json duplicate prevention:

Priority 1: Michelin Guide City (Most Reliable)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ metadata[type="michelin"].data.guide.city    â”‚
â”‚                                              â”‚
â”‚ Example: "Modena"                            â”‚
â”‚                                              â”‚
â”‚ Reliability: â­â­â­â­â­ (Highest)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ If not available...
           â–¼
Priority 2: Google Places Vicinity
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ metadata[type="google-places"]               â”‚
â”‚   .data.location.vicinity                    â”‚
â”‚                                              â”‚
â”‚ Example: "Via Stella, 22, Modena"           â”‚
â”‚ Parsed to: "Modena"                         â”‚
â”‚                                              â”‚
â”‚ Reliability: â­â­â­â­ (High)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ If not available...
           â–¼
Priority 3: Collector Address Parsing
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ metadata[type="collector"]                   â”‚
â”‚   .data.location.address                     â”‚
â”‚                                              â”‚
â”‚ Example: "Via Stella, 22, Modena, Italy"    â”‚
â”‚ Parsed to: "Modena"                         â”‚
â”‚                                              â”‚
â”‚ Parsing Logic:                               â”‚
â”‚ - Skip postal codes (numbers)                â”‚
â”‚ - Skip country names                         â”‚
â”‚ - Skip street addresses (start with digit)  â”‚
â”‚                                              â”‚
â”‚ Reliability: â­â­â­ (Medium)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ If not available...
           â–¼
Fallback: "Unknown"
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ City cannot be determined                    â”‚
â”‚                                              â”‚
â”‚ Warning: May cause duplicate issues          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MIGRATION PATH                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Current State (Using /batch):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… Basic sync working                                   â”‚
â”‚ âœ… Server IDs mapped                                    â”‚
â”‚ âŒ Losing location data                                 â”‚
â”‚ âŒ Losing photos                                        â”‚
â”‚ âŒ Losing notes                                         â”‚
â”‚ âŒ Losing Michelin data                                 â”‚
â”‚ âŒ Losing Google Places data                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ RECOMMENDED MIGRATION
                    â–¼
Future State (Using /json):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… Complete data preservation                           â”‚
â”‚ âœ… Location data synced                                 â”‚
â”‚ âœ… Photos stored                                        â”‚
â”‚ âœ… Notes preserved                                      â”‚
â”‚ âœ… Michelin data saved                                  â”‚
â”‚ âœ… Google Places ratings stored                         â”‚
â”‚ âœ… Intelligent duplicate prevention                     â”‚
â”‚ âœ… Future-proof JSONB storage                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     RESPONSE FORMATS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

/api/restaurants/batch - Full Success (200):
{
  "status": "success",
  "summary": {
    "total": 10,
    "successful": 10,
    "failed": 0
  },
  "restaurants": [
    {
      "localId": 1,
      "serverId": 456,
      "name": "Restaurant Name",
      "status": "success"
    }
  ]
}

/api/restaurants/batch - Partial Success (207):
{
  "status": "partial",
  "summary": {
    "total": 10,
    "successful": 8,
    "failed": 2
  },
  "restaurants": [
    {
      "localId": 1,
      "serverId": 456,
      "name": "Success",
      "status": "success"
    },
    {
      "localId": 2,
      "name": "Failed",
      "status": "error",
      "message": "Missing required field"
    }
  ]
}

/api/curation/json - Success (200):
{
  "status": "success",
  "processed": 10,
  "message": "Successfully processed 10 restaurants"
}

/api/restaurants/sync - Success (200):
{
  "status": "success",
  "summary": {
    "created": 3,
    "updated": 2,
    "deleted": 1,
    "errors": []
  }
}


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ERROR CODES                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

200 OK              â”€â”€â”€â”€â”€> Full success, all operations completed
201 Created         â”€â”€â”€â”€â”€> Resource created (not currently used)
207 Multi-Status    â”€â”€â”€â”€â”€> Partial success (some items failed)
400 Bad Request     â”€â”€â”€â”€â”€> Invalid JSON or missing required fields
404 Not Found       â”€â”€â”€â”€â”€> Resource not found
500 Server Error    â”€â”€â”€â”€â”€> Internal server error
503 Unavailable     â”€â”€â”€â”€â”€> Database connection failed (health check)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     QUICK REFERENCE                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Use Case             â”‚ Recommended Endpoint                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ New integration      â”‚ /api/curation/json âœ…                  â”‚
â”‚ Complete metadata    â”‚ /api/curation/json âœ…                  â”‚
â”‚ Location/photos      â”‚ /api/curation/json âœ…                  â”‚
â”‚ Michelin/Google data â”‚ /api/curation/json âœ…                  â”‚
â”‚ Future-proof         â”‚ /api/curation/json âœ…                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Legacy sync          â”‚ /api/restaurants/batch âš ï¸             â”‚
â”‚ Server ID mapping    â”‚ /api/restaurants/batch âš ï¸             â”‚
â”‚ Simple data only     â”‚ /api/restaurants/batch âš ï¸             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Delete restaurants   â”‚ /api/restaurants/sync âš ï¸              â”‚
â”‚ Atomic CRUD          â”‚ /api/restaurants/sync âš ï¸              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Health check         â”‚ /api/health âœ…                         â”‚
â”‚ Server version       â”‚ /status âœ…                             â”‚
â”‚ Query restaurants    â”‚ /api/restaurants?page=1&limit=50 âœ…    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FINAL RECOMMENDATION                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    ğŸ¯ MIGRATE TO /api/curation/json

Why?
  âœ… Preserves ALL your data (no loss)
  âœ… Better duplicate prevention (city + curator aware)
  âœ… Future-proof (JSONB storage, no schema changes)
  âœ… Already production-ready and tested
  âœ… Sophisticated city extraction (multi-source)

When?
  ğŸ”´ IMMEDIATELY if you have location/photos/notes data
  ğŸŸ¡ SOON if planning Michelin/Google integration
  ğŸŸ¢ EVENTUALLY for future-proofing

How?
  See API_RECOMMENDATIONS.md for complete migration guide
  with code examples and testing strategy.

```

**Document Version:** 1.0  
**Visual Type:** ASCII Decision Tree  
**Status:** Ready for Distribution
