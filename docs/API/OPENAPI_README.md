# OpenAPI Schema

## üìÑ Files

### openapi.yaml
**Auto-generated OpenAPI 3.1.0 specification**  
Generated from FastAPI application using Pydantic models.

**‚ö†Ô∏è Do not edit manually!** This file is automatically generated from the API code.

### openapi.json
Machine-readable JSON version (same content as YAML).

---

## üîÑ How to Update

The OpenAPI schema is automatically generated by FastAPI based on:
- Route definitions in `concierge-api-v3/app/api/*.py`
- Pydantic models in `concierge-api-v3/app/models/*.py`
- Docstrings and descriptions in the code

### Update Process

#### Option 1: Download from Running API
```bash
# Start the API
cd concierge-api-v3
python main.py

# Download schema (in another terminal)
cd API-REF
curl http://localhost:8000/api/v3/openapi.json > openapi.json

# Convert to YAML
python3 -c "import json, yaml; print(yaml.dump(json.load(open('openapi.json')), default_flow_style=False, sort_keys=False, allow_unicode=True))" > openapi.yaml
```

#### Option 2: Use Update Script
```bash
cd API-REF
./update_openapi.sh
```

---

## üìä Current Schema

- **Version:** OpenAPI 3.1.0
- **API Version:** 3.0.0
- **Lines:** ~1,456 (YAML)
- **Endpoints:** 21+
- **Schemas:** 20+ models
- **Security:** API Key authentication

### Included
- ‚úÖ All endpoint definitions
- ‚úÖ Request/response schemas
- ‚úÖ Authentication schemes
- ‚úÖ Validation rules
- ‚úÖ Descriptions from docstrings
- ‚úÖ Examples
- ‚úÖ Parameter constraints

---

## üîó Interactive Documentation

The same schema powers the interactive documentation:

- **Swagger UI:** https://wsmontes.pythonanywhere.com/api/v3/docs
- **ReDoc:** https://wsmontes.pythonanywhere.com/api/v3/redoc
- **Raw JSON:** https://wsmontes.pythonanywhere.com/api/v3/openapi.json

---

## üõ†Ô∏è Uses

### Code Generation
```bash
# Generate client code
openapi-generator-cli generate \
  -i openapi.yaml \
  -g python \
  -o generated-client/
```

### API Testing
Import into:
- Postman
- Insomnia
- Swagger Editor
- API testing tools

### Documentation
- Automatic docs generation
- API reference websites
- Integration guides

---

## üìù Schema Sections

### Info
- API title, description, version
- Contact information
- License (if applicable)

### Servers
- Production: `https://wsmontes.pythonanywhere.com/api/v3`
- Local: `http://localhost:8000/api/v3`

### Paths
All API endpoints grouped by:
- System (health, info)
- Entities (CRUD operations)
- Curations (CRUD operations)
- Places (Google Places proxy)
- AI Services (OpenAI integration)

### Components
- **Schemas:** Pydantic models (Entity, Curation, etc.)
- **Security:** API Key header authentication
- **Responses:** Common error responses
- **Parameters:** Reusable parameters

---

## üîÑ Version History

### 3.0.0 (Current - Nov 2025)
- Complete FastAPI auto-generated schema
- 21+ endpoints (System, Entities, Curations, Places, AI)
- 20+ Pydantic models
- API Key security scheme
- Comprehensive validation rules

### 2.0 (Legacy)
- Manual YAML (644 lines)
- Basic entities and curations
- No AI or Places endpoints

---

## üìö Related Documentation

- **Quick Reference:** [API_QUICK_REFERENCE.md](./API_QUICK_REFERENCE.md)
- **Complete Docs:** [API_DOCUMENTATION_V3.md](./API_DOCUMENTATION_V3.md)
- **Backend README:** [../concierge-api-v3/README.md](../concierge-api-v3/README.md)

---

**Note:** Always regenerate from the running API to ensure accuracy. The schema reflects the actual implementation.
